-- Создаем базу данных
CREATE DATABASE flower_shop;
GO

USE flower_shop;
GO

-- 1. Таблица цветов
CREATE TABLE flowers (
    id INT PRIMARY KEY IDENTITY(1,1),
    name NVARCHAR(100) NOT NULL,
    color NVARCHAR(50) NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    in_stock BIT DEFAULT 1
);
GO

-- 2. Таблица товаров
CREATE TABLE products (
    id INT PRIMARY KEY IDENTITY(1,1),
    name NVARCHAR(100) NOT NULL,
    category NVARCHAR(50) NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    in_stock BIT DEFAULT 1
);
GO

-- 3. Таблица клиентов
CREATE TABLE clients (
    id INT PRIMARY KEY IDENTITY(1,1),
    name NVARCHAR(50) NOT NULL,
    surname NVARCHAR(50) NOT NULL,
    phone NVARCHAR(20) UNIQUE NOT NULL
);
GO

-- 4. Таблица заказов
CREATE TABLE orders (
    order_id INT PRIMARY KEY IDENTITY(1,1),
    client_id INT NOT NULL,
    date DATE NOT NULL,
    status NVARCHAR(20) DEFAULT 'новый',
    FOREIGN KEY (client_id) REFERENCES clients(id)
);
GO

-- 5. Таблица состава заказа
CREATE TABLE order_items (
    id INT PRIMARY KEY IDENTITY(1,1),
    order_id INT NOT NULL,
    flower_id INT NULL,
    kol_flower INT DEFAULT 0,
    product_id INT NULL,
    kol_product INT DEFAULT 0,
    FOREIGN KEY (order_id) REFERENCES orders(order_id),
    FOREIGN KEY (flower_id) REFERENCES flowers(id),
    FOREIGN KEY (product_id) REFERENCES products(id)
);
GO




USE flower_shop;
GO

-- Заполняем таблицу цветов (20 записей)
INSERT INTO flowers (name, color, price, in_stock) VALUES
(N'Роза', N'Красный', 150.00, 1),
(N'Роза', N'Белый', 140.00, 1),
(N'Роза', N'Розовый', 145.00, 1),
(N'Тюльпан', N'Желтый', 80.00, 1),
(N'Тюльпан', N'Красный', 85.00, 1),
(N'Тюльпан', N'Фиолетовый', 90.00, 1),
(N'Лилия', N'Белый', 200.00, 1),
(N'Лилия', N'Розовый', 210.00, 1),
(N'Гербера', N'Оранжевый', 120.00, 1),
(N'Гербера', N'Желтый', 115.00, 1),
(N'Хризантема', N'Белый', 95.00, 1),
(N'Хризантема', N'Фиолетовый', 100.00, 1),
(N'Орхидея', N'Белый', 350.00, 1),
(N'Орхидея', N'Фиолетовый', 370.00, 1),
(N'Пион', N'Розовый', 180.00, 0),
(N'Пион', N'Белый', 175.00, 1),
(N'Ирис', N'Фиолетовый', 110.00, 1),
(N'Ирис', N'Желтый', 105.00, 1),
(N'Гвоздика', N'Красный', 70.00, 1),
(N'Гвоздика', N'Белый', 75.00, 0);
GO

-- Заполняем таблицу товаров (20 записей)
INSERT INTO products (name, category, price, in_stock) VALUES
(N'Ваза стеклянная', N'Вазы', 500.00, 1),
(N'Ваза керамическая', N'Вазы', 800.00, 1),
(N'Горшок цветочный', N'Горшки', 300.00, 1),
(N'Горшок декоративный', N'Горшки', 450.00, 1),
(N'Лента атласная', N'Упаковка', 50.00, 1),
(N'Бумага упаковочная', N'Упаковка', 30.00, 1),
(N'Открытка поздравительная', N'Аксессуары', 40.00, 1),
(N'Мягкая игрушка', N'Аксессуары', 250.00, 1),
(N'Подарочная корзина', N'Корзины', 1200.00, 1),
(N'Корзина плетеная', N'Корзины', 900.00, 1),
(N'Удобрение для цветов', N'Уход', 150.00, 1),
(N'Спрей для блеска', N'Уход', 200.00, 1),
(N'Ножницы садовые', N'Инструменты', 350.00, 1),
(N'Лейка пластиковая', N'Инструменты', 180.00, 1),
(N'Свеча ароматическая', N'Декор', 120.00, 0),
(N'Рамка для фото', N'Декор', 220.00, 1),
(N'Конфеты шоколадные', N'Сладости', 280.00, 1),
(N'Плюшевый мишка', N'Игрушки', 400.00, 1),
(N'Воздушный шар', N'Декор', 60.00, 1),
(N'Подарочный сертификат', N'Аксессуары', 1000.00, 1);
GO

-- Заполняем таблицу клиентов (20 записей)
INSERT INTO clients (name, surname, phone) VALUES
(N'Иван', N'Иванов', '+7-911-111-11-11'),
(N'Петр', N'Петров', '+7-922-222-22-22'),
(N'Мария', N'Сидорова', '+7-933-333-33-33'),
(N'Анна', N'Смирнова', '+7-944-444-44-44'),
(N'Сергей', N'Кузнецов', '+7-955-555-55-55'),
(N'Ольга', N'Попова', '+7-966-666-66-66'),
(N'Алексей', N'Васильев', '+7-977-777-77-77'),
(N'Екатерина', N'Павлова', '+7-988-888-88-88'),
(N'Дмитрий', N'Семенов', '+7-999-999-99-99'),
(N'Наталья', N'Фролова', '+7-900-000-00-01'),
(N'Андрей', N'Николаев', '+7-900-000-00-02'),
(N'Ирина', N'Орлова', '+7-900-000-00-03'),
(N'Владимир', N'Андреев', '+7-900-000-00-04'),
(N'Светлана', N'Макарова', '+7-900-000-00-05'),
(N'Михаил', N'Зайцев', '+7-900-000-00-06'),
(N'Татьяна', N'Егорова', '+7-900-000-00-07'),
(N'Павел', N'Романов', '+7-900-000-00-08'),
(N'Юлия', N'Виноградова', '+7-900-000-00-09'),
(N'Александр', N'Белов', '+7-900-000-00-10'),
(N'Людмила', N'Медведева', '+7-900-000-00-11');
GO

-- Заполняем таблицу заказов (20 записей)
INSERT INTO orders (client_id, date, status) VALUES
(1, '2024-01-15', N'выполнен'),
(2, '2024-01-16', N'выполнен'),
(3, '2024-01-17', N'выполнен'),
(4, '2024-01-18', N'выполнен'),
(5, '2024-01-19', N'выполнен'),
(6, '2024-01-20', N'выполнен'),
(7, '2024-01-21', N'выполнен'),
(8, '2024-01-22', N'выполнен'),
(9, '2024-01-23', N'выполнен'),
(10, '2024-01-24', N'выполнен'),
(11, '2024-01-25', N'новый'),
(12, '2024-01-26', N'новый'),
(13, '2024-01-27', N'новый'),
(14, '2024-01-28', N'обработка'),
(15, '2024-01-29', N'обработка'),
(16, '2024-01-30', N'доставка'),
(17, '2024-01-31', N'доставка'),
(18, '2024-02-01', N'отменен'),
(19, '2024-02-02', N'отменен'),
(20, '2024-02-03', N'новый');
GO

-- Заполняем таблицу состава заказа (20 записей)
INSERT INTO order_items (order_id, flower_id, kol_flower, product_id, kol_product) VALUES
(1, 1, 5, 1, 1),
(1, 3, 3, 5, 2),
(2, 5, 7, 7, 1),
(3, 7, 2, 9, 1),
(4, 9, 4, 11, 1),
(5, 11, 6, 13, 1),
(6, 13, 1, 15, 2),
(7, 15, 3, 17, 1),
(8, 17, 5, 19, 1),
(9, 2, 4, 2, 1),
(10, 4, 8, 4, 1),
(11, 6, 2, 6, 3),
(12, 8, 5, 8, 1),
(13, 10, 3, 10, 1),
(14, 12, 7, 12, 1),
(15, 14, 2, 14, 1),
(16, 16, 4, 16, 1),
(17, 18, 6, 18, 1),
(18, 20, 3, 20, 1),
(19, 1, 10, 3, 2),
(20, 3, 4, 5, 1);
GO

-- Заполняем таблицу клиентов (20 записей) с новым форматом номеров
INSERT INTO clients (name, surname, phone) VALUES
(N'Иван', N'Иванов', '+7(959)111-11-11'),
(N'Петр', N'Петров', '+7(959)222-22-22'),
(N'Мария', N'Сидорова', '+7(959)333-33-33'),
(N'Анна', N'Смирнова', '+7(959)444-44-44'),
(N'Сергей', N'Кузнецов', '+7(959)555-55-55'),
(N'Ольга', N'Попова', '+7(959)666-66-66'),
(N'Алексей', N'Васильев', '+7(959)777-77-77'),
(N'Екатерина', N'Павлова', '+7(959)888-88-88'),
(N'Дмитрий', N'Семенов', '+7(959)999-99-99'),
(N'Наталья', N'Фролова', '+7(959)123-45-67'),
(N'Андрей', N'Николаев', '+7(959)234-56-78'),
(N'Ирина', N'Орлова', '+7(959)345-67-89'),
(N'Владимир', N'Андреев', '+7(959)456-78-90'),
(N'Светлана', N'Макарова', '+7(959)567-89-01'),
(N'Михаил', N'Зайцев', '+7(959)678-90-12'),
(N'Татьяна', N'Егорова', '+7(959)789-01-23'),
(N'Павел', N'Романов', '+7(959)890-12-34'),
(N'Юлия', N'Виноградова', '+7(959)901-23-45'),
(N'Александр', N'Белов', '+7(959)012-34-56'),
(N'Людмила', N'Медведева', '+7(959)111-22-33');
GO

-- Проверяем количество записей в каждой таблице
SELECT 
    (SELECT COUNT(*) FROM flowers) as flowers_count,
    (SELECT COUNT(*) FROM products) as products_count,
    (SELECT COUNT(*) FROM clients) as clients_count,
    (SELECT COUNT(*) FROM orders) as orders_count,
    (SELECT COUNT(*) FROM order_items) as order_items_count;
GO
